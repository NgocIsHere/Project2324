Use PHONGKHAM_DB
GO

-- 3/ Thêm Data

-- Chèn dữ liệu cho bảng NHANVIEN
INSERT INTO NHANVIEN (ID, HOTEN, NGAYSINH, DIACHI, SDT, GIOITINH, MATKHAU)
VALUES
	('NV000001', N'Lê Trần Như Ngọc', '2003-11-16', N'123 Đường ABC, Quận XYZ', '1234567890', N'Nữ', 'pass1234'),
    ('NV000002', N'Nhân viên 2', '1985-05-05', N'456 Đường XYZ, Quận ABC', '0987654321', N'Nam', 'pass4567');

-- Chèn dữ liệu cho bảng NHASI
INSERT INTO NHASI (ID, HOTEN, NGAYSINH, DIACHI, SDT, GIOITINH, MATKHAU)
VALUES
    ('NS000001', N'Phạm Nhật An', '1990-01-01', N'123 Đường ABC, Quận XYZ', '1234567890', N'Nam', 'pass1234'),
    ('NS000002', 'Philippe Macaire', '1985-05-05', N'456 Đường XYZ, Quận ABC', '0987654321', N'Nữ', 'pass4567');

-- Chèn dữ liệu cho bảng QTV
INSERT INTO QTV (ID, HOTEN, NGAYSINH, DIACHI, SDT, GIOITINH, MATKHAU)
VALUES
    ('QTV00001', 'Quan Tri Vien 1', '1988-07-20', N'789 Đường XYZ, Quận ABC', '0123456789', 'Nam', 'qtvpass1');

-- Chèn dữ liệu cho 
-- Chèn dữ liệu cho bảng LICHLAMVIEC
INSERT INTO LICHLAMVIEC (NHASI, NGAY, THOIGIAN, TRANGTHAI)
VALUES
    ('NS000001', '2023-01-15', '08:00:00.0000000', 1),
    ('NS000002', '2023-01-15', '09:00:00.0000000', 0),
	('NS000001', '2023-01-15', '09:00:00.0000000', 1);


-- Chèn dữ liệu cho bảng BENHAN
INSERT INTO BENHAN (ID, HOTEN, NGAYSINH, DIACHI, SDT, GIOITINH,  THONGTINTONGQUAN)
VALUES
    ('BN000001', N'Lê Minh Nghĩa', '1992-03-10', N'321 Đường XYZ, Quận ABC', '1112223333', N'Nam','Tong quan benh ly 1'),
    ('BN000002', N'Nguyễn Anh Thy', '1980-12-05', N'555 Đường ABC, Quận XYZ', '4445556666', N'Nữ', 'Tong quan benh ly 2');
-- Chèn dữ liệu cho bảng KHDIEUTRI
INSERT INTO KHDIEUTRI(ID, BENHNHAN, TRANGTHAI) 
VALUES
	('KH000001','BN000001', 1),
	('KH000002', 'BN000001', 0),
	('KH000001', 'BN000002', 0);
-- Chèn dữ liệu cho bảng DIEUTRI


INSERT INTO DIEUTRI (MADIEUTRI, BENHNHAN, KEHOACH, NHASI, NGAY, CACRANG, MOTA, GIA, TRANGTHAI)
VALUES
(1, 'BN000001', 'KH000001', 'NS000001', '2023-01-01', 'Some Rang', 'Treatment for BN000001', 1500000, 1),
(2, 'BN000001', 'KH000002', 'NS000002', '2023-02-01', 'Another Rang', 'Treatment for BN000002', 500000, 1),
(1, 'BN000002', 'KH000001', 'NS000001', '2023-02-01', 'Another Rang', 'Treatment for BN000002', 500000, 1);

INSERT INTO THANHTOAN (MADIEUTRI, BENHNHAN, KEHOACH, LATIENMAT, TIENNHAN, TIENTHOI, NGAYTT)
VALUES
(1, 'BN000001', 'KH000001', 0x01, 100.0, 50.0, '2023-01-15'),
(2, 'BN000001', 'KH000002', 0x00, 200.0, 0.0, '2023-02-20'),
(1, 'BN000002', 'KH000001', 0x00, 200.0, 0.0, '2023-02-20');

-- Chèn dữ liệu cho bảng TAIKHAM
INSERT INTO CUOCHEN(ID, BENHNHAN, NHASI,NGAYHEN, GIOHEN, GHICHU, LATAIKHAM, TRANGTHAI)
VALUES
    (1, 'BN000001', 'NS000001', '2023-01-15' ,'08:30:00','ghi chu', 1, 1),
	(2, 'BN000001', 'NS000001', '2023-02-18' ,'14:00:00','ghi chu', 0, 0),
    (1, 'BN000002', 'NS000001', '2023-02-18' ,'14:00:00','ghi chu', 0, 0);

-- QUAN LY HOSOBENHNHAN: BENHAN
-- Tìm các liên kết tái khám của bệnh nhân: 'BN000001'
SELECT *
FROM CUOCHEN CH
WHERE CH.LATAIKHAM = 1 AND CH.BENHNHAN ='BN000001'
-- CHO PHÉP INSERT CUỘC HẸN:
-- BÁC SĨ -> NGÀY HẸN -> Completed
/* 
VD: 
BENHNHAN: ID = 'BN000001'

IF ISTAIKHAM = 1:
	NHASI = 'Default';
	NGAYHEN = MIN('Default'/LICHLAMVIEC)
ELSE: 
	NGAYHEN = '01/01/2023'
	NHASI = OneOfList(Lichlamviec/ngayhen/trangthai = 0)
GIOHEN = [sang/chieu],


INSERT INTO CUOCHEN(ID, BENHNHAN, NHASI,NGAYHEN, GIOHEN, GHICHU, LATAIKHAM, TRANGTHAI)
VALUES (
COMPLETED!
*/
select *
from NHASI